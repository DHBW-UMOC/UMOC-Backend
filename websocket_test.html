<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>WebSocket Test</title>
  <script src="https://cdn.socket.io/4.7.2/socket.io.min.js"></script>
</head>
<body>
  <h1>WebSocket Test</h1>
  <button onclick="sendTyping()">Send Typing</button>
  <button onclick="sendMessage()">Send Message</button>
<!--  <button onclick="sendSystemMessage()">Send System Message</button>-->
<!--  <button onclick="useItem()">Use Item</button>-->

  <script>
    // === CONFIG ===
    const SERVER_URL = "http://localhost:5000";
    const TOKEN = "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJmcmVzaCI6ZmFsc2UsImlhdCI6MTc0NzQwNzU1NiwianRpIjoiM2EwODgyNTgtMmFlMy00ZTYzLTg2MmUtMzU0MTFmNmRiNTU5IiwidHlwZSI6ImFjY2VzcyIsInN1YiI6IjAwMDAwMDAwLTAwMDAtMDAwMC0wMDAwLTAwMDAwMDAwMDAwMSIsIm5iZiI6MTc0NzQwNzU1NiwiY3NyZiI6ImNkYWZhYTkwLWRiNjEtNDk3Ni05Nzg2LThhZjQyYmI3ZDhhNiIsImV4cCI6MTc0NzQ5Mzk1Nn0.9XbtSPPUmY2flYQ2j32Sw7mnJud3rrgGD4f4zvsqNBo";
    const RECIPIENT_ID = "00000000-0000-0000-0000-000000000002";
    // const ITEM_ID = "item123";
    const MESSAGE = "Hello from test!";
    const CHAR = "H";

    // === INIT SOCKET ===
    const socket = io(SERVER_URL, {
      query: { token: TOKEN }
    });

    socket.on("connect", () => {
      console.log("Connected");
    });

    socket.on("disconnect", () => {
      console.log("Disconnected");
    });

    socket.on("new_message", (msg) => {
      console.log("New Message:", msg);
    });

    socket.on("typing", (data) => {
      console.log("Typing:", data);
    });

    socket.on("user_status", (data) => {
      console.log("User status:", data);
    });

    socket.on("item_used", (data) => {
      console.log("Item used:", data);
    });

    socket.on("system_message", (data) => {
      console.log("System message:", data);
    });

    // === ACTIONS ===
    function sendTyping() {
      socket.emit("action", {
        action: "typing",
        data: {
          recipient_id: RECIPIENT_ID,
          char: CHAR
        }
      });
    }

    function sendMessage() {
      socket.emit("action", {
        action: "sendMessage",
        data: {
          recipient_id: RECIPIENT_ID,
          content: MESSAGE,
          type: "text"
        }
      });
    }

    // function sendSystemMessage() {
    //   socket.emit("action", {
    //     action: "system_message",
    //     data: {
    //       recipient_id: RECIPIENT_ID,
    //       content: "System message test"
    //     }
    //   });
    // }
    //
    // function useItem() {
    //   socket.emit("action", {
    //     action: "useItem",
    //     data: {
    //       recipient_id: RECIPIENT_ID,
    //       item_id: ITEM_ID
    //     }
    //   });
    // }
  </script>
</body>
</html>
